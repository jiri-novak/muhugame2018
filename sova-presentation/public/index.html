<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>MuhuGame 2018 - výsledky</title>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/sky.css" id="theme">
    <link rel="stylesheet" href="css/muhu/style.css">
    <!--Add support for earlier versions of Internet Explorer -->
    <!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <div id="hidden" style="display:none;">
        <!-- <div id="header">
            <div id="header-left">MuhuGame 2018</div>
        </div> -->
    </div>

    <div class="reveal">
        <div class="slides">

            <section>
                <img src="images/sova.svg" class="stretch" style="border: 0px; box-shadow: none; background-color: transparent">
            </section>

            <section>
                <section>
                    <h3>Trasa - mapa</h3>
                    <img class="stretch" src="data/mapa-trasa.png" />
                    <p class="fragment">Vzdálenost: 25,58 km</p>
                </section>
                <section>
                    <h3>Trasa - výškový profil</h3>
                    <img class="stretch" src="data/mapa-profil.png" />
                    <p class="fragment">Celkové stoupání: 873 m</p>
                </section>
            </section>

            <section>
                <section>
                    <h3>Prolog - zadání</h3>
                    <img height="200" src="data/prolog-0.png">
                    <img height="200" src="data/prolog-1.png">
                    <img height="200" src="data/prolog-2.jpg">
                </section>
                <section>
                    <h3>Prolog - řešení</h3>
                    <img class="stretch" src="data/prolog-reseni-1.png">
                </section>
                <section>
                    <h3>Prolog - řešení</h3>
                    <img class="stretch" src="data/prolog-reseni-2.jpg">
                </section>
                <section>
                    <table>
                        <thead>
                            <th>Umístění</th>
                            <th>Název týmu</th>
                            <th>Čas</th>
                        </thead>
                        <tbody id="results-prolog">
                        </tbody>
                    </table>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 1</h2>
                    <h3>Jiřetín pod Jedlovou</h3>

                    <h4>A1 - orienťácká šifra</h4>
                    <img height="200" src="data/a-1.png">
                </section>
                <section>
                    <h3>A1 - řešení</h3>
                    <img class="stretch" src="data/a-1-reseni.png">
                </section>
                <section>
                    <h3>A1 - úspěšnost</h3>
                    <canvas id="a1-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 2</h2>
                    <h3>Adrenalin park</h3>

                    <h4>A2 - obrázková šifra s hexy</h4>
                    <h4>B2 - káry</h4>

                    <img height="200" src="data/a-2.png">
                    <img height="200" src="data/b-2.png">
                </section>
                <section>
                    <h3>A2 - řešení</h3>
                    <img class="stretch" src="data/a-2-reseni.png">
                </section>
                <section>
                    <h3>A2 - úspěšnost</h3>
                    <canvas id="a2-chart"></canvas>
                </section>
                <section>
                    <h3>B2 - káry</h3>
                    <img class="stretch" src="data/b-2.png">
                </section>
                <section>
                    <h3>B2 - úspěšnost</h3>
                    <canvas id="b2-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 3</h2>
                    <h3>Jedlová - rozhledna</h3>

                    <h4>A3 - vlaková</h4>
                    <h4>B3 - rozhledna + fotka</h4>

                    <img height="200" src="data/a-3.png">
                    <img height="200" src="data/b-3.jpg">
                </section>
                <section>
                    <h3>A3 - řešení</h3>
                    <img class="stretch" src="data/a-3-reseni.png">
                </section>
                <section>
                    <h3>A3 - úspěšnost</h3>
                    <canvas id="a3-chart"></canvas>
                </section>
                <section>
                    <h3>B3 - rozhledna + fotka</h3>
                    <img class="stretch" src="data/b-3.jpg">
                </section>
                <section>
                    <h3>B3 - úspěšnost</h3>
                    <canvas id="b3-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 4</h2>
                    <h3>Malý Stožec</h3>

                    <h4>A4 - chemická</h4>
                    <h4>B4 - přenos zprávy</h4>

                    <img height="200" src="data/a-4.png">
                    <img height="200" src="data/b-4.jpg">
                </section>
                <section>
                    <h3>A4 - řešení</h3>
                    <img class="stretch" src="data/a-4-reseni.png">
                </section>
                <section>
                    <h3>A4 - úspěšnost</h3>
                    <canvas id="a4-chart"></canvas>
                </section>
                <section>
                    <h4>B4 - přenos zprávy</h4>
                    <img class="stretch" src="data/b-4.jpg">
                </section>
                <section>
                    <h3>B4 - úspěšnost</h3>
                    <canvas id="b4-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 5</h2>
                    <h3>Malý Semerink</h3>

                    <h4>A5 - smyslová</h4>
                    <h4>B5 - logik</h4>

                    <img height="200" src="data/a-5.png">
                    <img height="200" src="data/b-5.jpg">
                </section>
                <section>
                    <h3>A5 - řešení</h3>
                    <img class="stretch" src="data/a-5-reseni.png">
                </section>
                <section>
                    <h3>A5 - úspěšnost</h3>
                    <canvas id="a5-chart"></canvas>
                </section>
                <section>
                    <h4>B5 - logik</h4>
                    <img class="stretch" src="data/b-5.jpg">
                </section>
                <section>
                    <h3>B5 - úspěšnost</h3>
                    <canvas id="b5-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 6</h2>
                    <h3>Střelecký terč</h3>

                    <h4>A6 - terče</h4>
                    <h4>B6 - biatlon</h4>

                    <img height="200" src="data/a-6.png">
                    <img height="200" src="data/b-6.jpg">
                </section>
                <section>
                    <h3>A6 - řešení</h3>
                    <img class="stretch" src="data/a-6-reseni.png">
                </section>
                <section>
                    <h3>A6 - úspěšnost</h3>
                    <canvas id="a6-chart"></canvas>
                </section>
                <section>
                    <h4>B6 - biatlon</h4>
                    <img class="stretch" src="data/b-6.jpg">
                </section>
                <section>
                    <h3>B6 - úspěšnost</h3>
                    <canvas id="b6-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 7</h2>
                    <h3>Lesní divadlo</h3>

                    <h4>A7 - křížovka</h4>
                    <h4>B7 - slackline</h4>

                    <img height="200" src="data/a-7.png">
                    <img height="200" src="data/b-7.jpg">
                </section>
                <section>
                    <h3>A7 - řešení</h3>
                    <img class="stretch" src="data/a-7-reseni.png">
                </section>
                <section>
                    <h3>A7 - úspěšnost</h3>
                    <canvas id="a7-chart"></canvas>
                </section>
                <section>
                    <h4>B7 - slackline</h4>
                    <img class="stretch" src="data/b-7.jpg">
                </section>
                <section>
                    <h3>B7 - úspěšnost</h3>
                    <canvas id="b7-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 8</h2>
                    <h3>Tomiškův rybník</h3>

                    <h4>A8 - vážící</h4>
                    <h4>B8 - námořní bitva</h4>

                    <img height="200" src="data/a-8.png">
                    <img height="200" src="data/b-8.jpg">
                </section>
                <section>
                    <h3>A8 - řešení</h3>
                    <img class="stretch" src="data/a-8-reseni.jpg">
                </section>
                <section>
                    <h3>A8 - úspěšnost</h3>
                    <canvas id="a8-chart"></canvas>
                </section>
                <section>
                    <h4>B8 - námořní bitva</h4>
                    <img class="stretch" src="data/b-8.jpg">
                </section>
                <section>
                    <h3>B8 - úspěšnost</h3>
                    <canvas id="b8-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 9</h2>
                    <h3>Chřibská přehrada</h3>

                    <h4>A9 - vysýpací</h4>
                    <h4>B9 - pípáky</h4>

                    <img height="200" src="data/a-9.png">
                    <img height="200" src="data/b-9.jpg">
                </section>
                <section>
                    <h3>A9 - řešení</h3>
                    <img class="stretch" src="data/a-9-reseni.png">
                </section>
                <section>
                    <h3>A9 - úspěšnost</h3>
                    <canvas id="a9-chart"></canvas>
                </section>
                <section>
                    <h4>B9 - pípáky</h4>
                    <img class="stretch" src="data/b-9.jpg">
                </section>
                <section>
                    <h3>B9 - úspěšnost</h3>
                    <canvas id="b9-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 10</h2>
                    <h3>Jedlová - osada</h3>

                    <h4>A10 - digitálky</h4>
                    <h4>B10 - lasery</h4>

                    <img height="200" src="data/a-10.png">
                    <img height="200" src="data/b-10.jpg">
                </section>
                <section>
                    <h3>A10 - řešení</h3>
                    <img class="stretch" src="data/a-10-reseni.png">
                </section>
                <section>
                    <h3>A10 - úspěšnost</h3>
                    <canvas id="a10-chart"></canvas>
                </section>
                <section>
                    <h4>B10 - Lasery</h4>
                    <img class="stretch" src="data/b-10.jpg">
                </section>
                <section>
                    <h3>B10 - úspěšnost</h3>
                    <canvas id="b10-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 11</h2>
                    <h3>Křížová Hora</h3>

                    <h4>A11 - obálka s postupovým kódem</h4>
                </section>
                <section>
                    <h3>A11 - úspěšnost</h3>
                    <canvas id="a11-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus 0</h2>

                    <h4>Večerní zábava pro nezmary</h4>
                    <img height="300" src="data/bonus-0.png">
                </section>
                <section>
                    <h3>Bonus 0 - řešení</h3>
                    <img class="stretch" src="data/bonus-0-reseni.png">
                </section>
                <section>
                    <h3>Bonus 0 - úspěšnost</h3>
                    <canvas id="bonus0-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus 1</h2>

                    <h4>A101 - slepá včela</h4>
                    <img height="300" src="data/bonus-1.png">
                </section>
                <section>
                    <h3>A101 - řešení</h3>
                    <img class="stretch" src="data/bonus-1-reseni.png">
                </section>
                <section>
                    <h3>A101 - úspěšnost</h3>
                    <canvas id="bonus1-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus 2</h2>

                    <h4>A102 - praporky</h4>
                    <img height="300" src="data/bonus-2.png">
                </section>
                <section>
                    <h3>A102 - řešení</h3>
                    <img class="stretch" src="data/bonus-2-reseni.png">
                </section>
                <section>
                    <h3>A102 - úspěšnost</h3>
                    <canvas id="bonus2-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus 3</h2>

                    <h4>A103 - barvy</h4>
                    <img height="300" src="data/bonus-3.png">
                </section>
                <section>
                    <h3>A103 - řešení</h3>
                    <img class="stretch" src="data/bonus-3-reseni.png">
                </section>
                <section>
                    <h3>A103 - úspěšnost</h3>
                    <canvas id="bonus3-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus - finální úkol</h2>

                    <h4>A104 - heslo z indicií</h4>
                    <img height="300" src="data/bonus-4.png">
                </section>
                <section>
                    <h3>A104 - řešení</h3>
                    <img class="stretch" src="data/bonus-4-reseni.png">
                </section>
                <section>
                    <h3>A104 - úspěšnost</h3>
                    <canvas id="bonus4-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus - úplný závěr</h2>
                    <img class="stretch" src="data/bonus-zaver.png">
                </section>
            </section>

            <section>
                <section data-state="chart-final-1">
                    <h3>Výsledné pořadí - body celkem</h3>
                    <canvas class="stretch" id="chart-final-1"></canvas>
                </section>
            </section>

            <section>
                <table>
                    <thead>
                        <tr>
                            <th>#.</th>
                            <th>Tým</th>
                            <th>Čas cílové SMS</th>
                            <th>Áčka</th>
                            <th>náp</th>
                            <th>řeš</th>
                            <th>Penalizace (náp + řeš)</th>
                            <th>Béčka</th>
                            <th>Bonus 1</th>
                            <th>Bonus 2</th>
                            <th>Bonus 3</th>
                            <th>Bonus 4</th>
                            <th>Penalizace (čas)</th>
                            <th>Penalizace (obálky)</th>
                            <th>Body</th>
                        </tr>
                    </thead>
                    <tbody id="results-all">
                    </tbody>
                </table>
            </section>

            <section>
                <table>
                    <thead>
                        <tr>
                            <th>#.</th>
                            <th>Tým</th>
                            <th align="center" width="35">Prolog</th>
                            <th align="center" width="35">1</th>
                            <th align="center" width="35">2</th>
                            <th align="center" width="35">3</th>
                            <th align="center" width="35">4</th>
                            <th align="center" width="35">5</th>
                            <th align="center" width="35">6</th>
                            <th align="center" width="35">7</th>
                            <th align="center" width="35">8</th>
                            <th align="center" width="35">9</th>
                            <th align="center" width="35">10</th>
                            <th align="center" width="35">11</th>
                            <th align="center" width="35">101</th>
                            <th align="center" width="35">102</th>
                            <th align="center" width="35">103</th>
                            <th align="center" width="35">104</th>
                        </tr>
                    </thead>
                    <tbody id="results-stan">
                    </tbody>
                </table>
            </section>

            <section>
                <section data-state="chart-difficulty-1">
                    <h3>Obtížnost A úkolů</h3>
                    <canvas class="stretch" id="chart-difficulty-1"></canvas>
                </section>
                <section data-state="chart-difficulty-2">
                    <h3>Obtížnost B úkolů</h3>
                    <canvas class="stretch" id="chart-difficulty-2"></canvas>
                </section>
                <section data-state="chart-difficulty-3">
                    <h3>Obtížnost Bonusů</h3>
                    <canvas class="stretch" id="chart-difficulty-3"></canvas>
                </section>
            </section>

            <section data-state="chart-final-1">
                <h2>Děkujeme</h2>
                <h3>Lamy</h3>
            </section>
        </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script src="js/chart.min.js"></script>
    <script src="js/chartjs-plugin-datalabels.js"></script>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/csv-to-array.js"></script>
    <script src="js/rxjs.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/moment.js"></script>
    <script src="js/muhu/muhu.js"></script>

    <script>
        var teams;
        var teamsCount;
        var keyUp = 38;
        var keyDown = 40;

        Reveal.initialize({
            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } }
            ]
        });

        Reveal.addEventListener('ready', function () {
            chartJsDefaults();

            getPrologData(data => {
                var prolog = data;
                $('#results-prolog').append(getPrologDataAsHtml(prolog));

                getACodes(data => {
                    var aCodes = data;

                    getBCodes(data => {
                        var bCodes = data;

                        getAnswers(data => {
                            var answers = data;

                            getHints(data => {
                                var hints = data;

                                getFinishData(data => {
                                    var finish = data;

                                    getStartData(data => {
                                        var start = data;

                                        // spoj data po tymech
                                        teams = mergeAll(prolog, start, finish, aCodes, bCodes, hints, answers);
                                        teamsCount = teams.length;

                                        $('#results-all').append(statsAsHtml(teams));
                                        $('#results-stan').append(statsStanAsHtml(teams));

                                        // spocitej statistiky uspesnosti stanovist
                                        window.a1Chart = createPieChartA('a1-chart', getChartAData(teams, 's001', 'a'));

                                        window.a2Chart = createPieChartA('a2-chart', getChartAData(teams, 's002', 'a'));
                                        window.b2Chart = createPieChartB('b2-chart', getChartBData(teams, 's002', 'b'));

                                        window.a3Chart = createPieChartA('a3-chart', getChartAData(teams, 's003', 'a'));
                                        window.b3Chart = createPieChartB('b3-chart', getChartBData(teams, 's003', 'b'));

                                        window.a4Chart = createPieChartA('a4-chart', getChartAData(teams, 's004', 'a'));
                                        window.b4Chart = createPieChartB('b4-chart', getChartBData(teams, 's004', 'b'));

                                        window.a5Chart = createPieChartA('a5-chart', getChartAData(teams, 's005', 'a'));
                                        window.b5Chart = createPieChartB('b5-chart', getChartBData(teams, 's005', 'b'));

                                        window.a6Chart = createPieChartA('a6-chart', getChartAData(teams, 's006', 'a'));
                                        window.b6Chart = createPieChartB('b6-chart', getChartBData(teams, 's006', 'b'));

                                        window.a7Chart = createPieChartA('a7-chart', getChartAData(teams, 's007', 'a'));
                                        window.b7Chart = createPieChartB('b7-chart', getChartBData(teams, 's007', 'b'));

                                        window.a8Chart = createPieChartA('a8-chart', getChartAData(teams, 's008', 'a'));
                                        window.b8Chart = createPieChartB('b8-chart', getChartBData(teams, 's008', 'b'));

                                        window.a9Chart = createPieChartA('a9-chart', getChartAData(teams, 's009', 'a'));
                                        window.b9Chart = createPieChartB('b9-chart', getChartBData(teams, 's009', 'b'));

                                        window.a10Chart = createPieChartA('a10-chart', getChartAData(teams, 's010', 'a'));
                                        window.b10Chart = createPieChartB('b10-chart', getChartBData(teams, 's010', 'b'));

                                        window.a11Chart = createPieChartA('a11-chart', getChartAData(teams, 's011', 'a'));

                                        window.bonus0Chart = createPieChartFinal('bonus0-chart', [ 0, 0, teams.length ]);
                                        window.bonus1Chart = createPieChartBon('bonus1-chart', getChartBonData(teams, 's101', 'a'));
                                        window.bonus2Chart = createPieChartBon('bonus2-chart', getChartBonData(teams, 's102', 'a'));
                                        window.bonus3Chart = createPieChartBon('bonus3-chart', getChartBonData(teams, 's103', 'a'));

                                        window.bonus4Chart = createPieChartFinal('bonus4-chart', getChartFinalData(teams, 's104', 'a'));

                                        var s001 = getChartAData(teams, 's001', 'a');
                                        var s002 = getChartAData(teams, 's002', 'a');
                                        var s003 = getChartAData(teams, 's003', 'a');
                                        var s004 = getChartAData(teams, 's004', 'a');
                                        var s005 = getChartAData(teams, 's005', 'a');
                                        var s006 = getChartAData(teams, 's006', 'a');
                                        var s007 = getChartAData(teams, 's007', 'a');
                                        var s008 = getChartAData(teams, 's008', 'a');
                                        var s009 = getChartAData(teams, 's009', 'a');
                                        var s010 = getChartAData(teams, 's010', 'a');
                                        var s011 = getChartAData(teams, 's011', 'a');

                                        var labelsA = [
                                            "A1 - orienťák",
                                            "A2 - obrázková",
                                            "A3 - vlaková",
                                            "A4 - chemická",
                                            "A5 - smyslová",
                                            "A6 - terče",
                                            "A7 - křížovka",
                                            "A8 - vážící",
                                            "A9 - vysýpací",
                                            "A10 - digitálky",
                                            "A11 - Křížová Hora"
                                        ];

                                        var s002b = getChartBData(teams, 's002', 'b');
                                        var s003b = getChartBData(teams, 's003', 'b');
                                        var s004b = getChartBData(teams, 's004', 'b');
                                        var s005b = getChartBData(teams, 's005', 'b');
                                        var s006b = getChartBData(teams, 's006', 'b');
                                        var s007b = getChartBData(teams, 's007', 'b');
                                        var s008b = getChartBData(teams, 's008', 'b');
                                        var s009b = getChartBData(teams, 's009', 'b');
                                        var s010b = getChartBData(teams, 's010', 'b');

                                        var labelsB = [
                                            "B2 - káry",
                                            "B3 - rozhledna selfie",
                                            "B4 - komunikátor",
                                            "B5 - logik",
                                            "B6 - biatlon",
                                            "B7 - slackline",
                                            "B8 - námořní bitva",
                                            "B9 - pípáky",
                                            "B10 - lasery"
                                        ];

                                        var s101 = getChartBonData(teams, 's101', 'a');
                                        var s102 = getChartBonData(teams, 's102', 'a');
                                        var s103 = getChartBonData(teams, 's103', 'a');
                                        var s104 = getChartFinalData(teams, 's104', 'a');

                                        var labelsBonusy = [
                                            "Bonus 0 - puzzle",
                                            "Bonus 1 - slepá včela",
                                            "Bonus 2 - praporky",
                                            "Bonus 3 - barvy",
                                            "Bonus 4 - indicie"
                                        ];

                                        window.difficulty1Chart = new Chart('chart-difficulty-1', {
                                            type: 'bar',
                                            data: {
                                                labels: labelsA,
                                                datasets: [
                                                    {
                                                        label: "Vyřešili bez nápovědy",
                                                        data: [
                                                            s001[0], s002[0], s003[0], s004[0], s005[0],
                                                            s006[0], s007[0], s008[0], s009[0], s010[0],
                                                            s011[0]
                                                        ],
                                                        backgroundColor: Samples.color(0)
                                                    },
                                                    {
                                                        label: "Vyřešili s nápovědou",
                                                        data: [
                                                            s001[1], s002[1], s003[1], s004[1], s005[1],
                                                            s006[1], s007[1], s008[1], s009[1], s010[1],
                                                            s011[1]
                                                        ],
                                                        backgroundColor: Samples.color(1)
                                                    },
                                                    {
                                                        label: "Vzali rovnou řešení",
                                                        data: [
                                                            s001[2], s002[2], s003[2], s004[2], s005[2],
                                                            s006[2], s007[2], s008[2], s009[2], s010[2],
                                                            s011[2]
                                                        ],
                                                        backgroundColor: Samples.color(2)
                                                    },
                                                    {
                                                        label: "Nevyřešili ani s nápovědou",
                                                        data: [
                                                            s001[3], s002[3], s003[3], s004[3], s005[3],
                                                            s006[3], s007[3], s008[3], s009[3], s010[3],
                                                            s011[3]
                                                        ],
                                                        backgroundColor: Samples.color(3)
                                                    },
                                                    {
                                                        label: "Nevyzvedli / nedokončili",
                                                        data: [
                                                            s001[4], s002[4], s003[4], s004[4], s005[4],
                                                            s006[4], s007[4], s008[4], s009[4], s010[4],
                                                            s011[4]
                                                        ],
                                                        backgroundColor: Samples.color(4)
                                                    }
                                                ]
                                            },
                                            options: {
                                                plugins: {
                                                    datalabels: {
                                                        color: 'white',
                                                        display: function (context) {
                                                            return context.dataset.data[context.dataIndex] > 0;
                                                        },
                                                        font: {
                                                            weight: 'bold'
                                                        },
                                                        formatter: Math.round
                                                    }
                                                },
                                                legend: {
                                                    display: true,
                                                    position: 'bottom'
                                                },
                                                scales: {
                                                    xAxes: [{
                                                        stacked: true,
                                                        ticks: {
                                                            autoSkip: false
                                                        }
                                                    }],
                                                    yAxes: [{
                                                        stacked: true
                                                    }]
                                                }
                                            }
                                        });

                                        window.difficulty2Chart = new Chart('chart-difficulty-2', {
                                            type: 'bar',
                                            data: {
                                                labels: labelsB,
                                                datasets: [
                                                    {
                                                        label: "Splnili",
                                                        data: [
                                                            s002b[0], s003b[0], s004b[0], s005b[0], s006b[0],
                                                            s007b[0], s008b[0], s009b[0], s010b[0]
                                                        ],
                                                        backgroundColor: Samples.color(0)
                                                    },
                                                    {
                                                        label: "Nesplnili",
                                                        data: [
                                                            s002b[1], s003b[1], s004b[1], s005b[1], s006b[1],
                                                            s007b[1], s008b[1], s009b[1], s010b[1]
                                                        ],
                                                        backgroundColor: Samples.color(1)
                                                    }
                                                ]
                                            },
                                            options: {
                                                plugins: {
                                                    datalabels: {
                                                        color: 'white',
                                                        display: function (context) {
                                                            return context.dataset.data[context.dataIndex] > 0;
                                                        },
                                                        font: {
                                                            weight: 'bold'
                                                        },
                                                        formatter: Math.round
                                                    }
                                                },
                                                legend: {
                                                    display: true,
                                                    position: 'bottom'
                                                },
                                                scales: {
                                                    xAxes: [{
                                                        stacked: true,
                                                        ticks: {
                                                            autoSkip: false
                                                        }
                                                    }],
                                                    yAxes: [{
                                                        stacked: true
                                                    }]
                                                }
                                            }
                                        });

                                        window.difficulty3Chart = new Chart('chart-difficulty-3', {
                                            type: 'bar',
                                            data: {
                                                labels: labelsBonusy,
                                                datasets: [
                                                    {
                                                        label: "Vyřešili bez nápovědy",
                                                        data: [
                                                            0, s101[0], s102[0], s103[0], 0
                                                        ],
                                                        backgroundColor: Samples.color(0)
                                                    },
                                                    {
                                                        label: "Vyřešili s nápovědou",
                                                        data: [
                                                            0, s101[1], s102[1], s103[1], 0
                                                        ],
                                                        backgroundColor: Samples.color(1)
                                                    },
                                                    {
                                                        label: "Nevyřešili ani s nápovědou",
                                                        data: [
                                                            0, s101[2], s102[2], s103[2], 0
                                                        ],
                                                        backgroundColor: Samples.color(2)
                                                    },
                                                    {
                                                        label: "Vyřešili",
                                                        data: [
                                                            0, 0, 0, 0, s104[0]
                                                        ],
                                                        backgroundColor: Samples.color(3)
                                                    },
                                                    {
                                                        label: "Nevyřešili",
                                                        data: [
                                                            0, 0, 0, 0, s104[1]
                                                        ],
                                                        backgroundColor: Samples.color(5)
                                                    },
                                                    {
                                                        label: "Nevyzvedli / nedokončili",
                                                        data: [
                                                            teams.length, s101[3], s102[3], s103[3], s104[2]
                                                        ],
                                                        backgroundColor: Samples.color(4)
                                                    }
                                                ]
                                            },
                                            options: {
                                                plugins: {
                                                    datalabels: {
                                                        color: 'white',
                                                        display: function (context) {
                                                            return context.dataset.data[context.dataIndex] > 0;
                                                        },
                                                        font: {
                                                            weight: 'bold'
                                                        },
                                                        formatter: Math.round
                                                    }
                                                },
                                                legend: {
                                                    display: true,
                                                    position: 'bottom'
                                                },
                                                scales: {
                                                    xAxes: [{
                                                        stacked: true,
                                                        ticks: {
                                                            autoSkip: false
                                                        }
                                                    }],
                                                    yAxes: [{
                                                        stacked: true
                                                    }]
                                                }
                                            }
                                        });

                                    });
                                });
                            });
                        });
                    });
                });
            });
        });

        Reveal.addEventListener('chart-final-1', function () {
            var labels = [];
            var data = [];
            for (var i = 0; i < teamsCount; ++i) {
                labels.push("");
                data.push(0);
            }

            window.final1Chart = new Chart('chart-final-1', {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        backgroundColor: Samples.color(0),
                        datalabels: {
                            align: 'center',
                            anchor: 'center',
                            rotation: -90
                        },
                        data: data
                    }]
                },
                options: {
                    plugins: {
                        datalabels: {
                            color: 'white',
                            display: function (context) {
                                return context.dataset.data[context.dataIndex] > 0;
                            },
                            font: {
                                weight: 'bold'
                            },
                            formatter: Math.round
                        }
                    },
                    legend: {
                        display: false
                    },
                    scales: {
                        xAxes: [{
                            maxBarThickness: 20,
                            categoryPercentage: 1.0,
                            barPercentage: 1.0,
                            stacked: true,
                            ticks: {
                                autoSkip: false,
                                maxRotation: 90,
                                minRotation: 90
                            }
                        }],
                        yAxes: [{
                            stacked: true,
                            ticks: {
                                display: false,
                                max: 140,
                                min: 0
                            }
                        }]
                    }
                }
            });
        });

        Reveal.addEventListener('slidechanged', function (event) {
            if (event.currentSlide.attributes["data-state"] != null &&
                event.currentSlide.attributes["data-state"].value == "chart-final-1") {
                var i = teamsCount;

                Reveal.addKeyBinding(keyDown, function () {
                    if (i > 0) {
                        --i;
                        finalChartAddData(window.final1Chart, i, teams[i].userName + ' | ' + (i + 1).toString().padStart(5, ' ') + '.', [teams[i].points_all]);
                    }
                });

                Reveal.addKeyBinding(keyUp, function () {
                    if (i < teamsCount) {
                        finalChartRemoveData(window.final1Chart, i);
                        ++i;
                    }
                });
            }
            else {
                Reveal.removeKeyBinding(keyDown);
                Reveal.removeKeyBinding(keyUp);
            }
        });

        Reveal.configure({
            pdfMaxPagesPerSlide: 1
        });
    </script>

    <script type="text/javascript">
        var header = $('#header').html();
        if (window.location.search.match(/print-pdf/gi)) {
            $('.slides > section').prepend(header);
        }
        else {
            $('.slides').prepend(header);
        }
    </script>
</body>

</html>