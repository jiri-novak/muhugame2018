<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>MuhuGame 2018 - výsledky</title>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/sky.css" id="theme">
    <link rel="stylesheet" href="css/muhu/style.css">
    <!--Add support for earlier versions of Internet Explorer -->
    <!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <div id="hidden" style="display:none;">
        <div id="header">
            <div id="header-left">MuhuGame 2018</div>
        </div>
    </div>

    <div class="reveal">
        <div class="slides">

            <section>
                <img src="images/sova.svg" class="stretch" style="border: 0px; box-shadow: none; background-color: transparent">
            </section>

            <section>
                <section>
                    <h3>Trasa - mapa</h3>
                    <img class="stretch" src="data/mapa-trasa.png" />
                </section>
                <section>
                    <h3>Trasa - výškový profil</h3>
                    <img class="stretch" src="data/mapa-profil.png" />
                </section>
            </section>

            <section>
                <section>
                    <h3>Prolog - zadání</h3>
                    <img width="300" src="data/prolog-0.png">
                    <img width="300" src="data/prolog-1.png">
                    <br/>
                    <img width="300" src="data/prolog-2.png">
                </section>
                <section>
                    <h3>Prolog - řešení</h3>
                    <img class="stretch" src="data/prolog-0.png">
                </section>
                <section>
                    <h3>Prolog - řešení</h3>
                    <img class="stretch" src="data/prolog-1.png">
                </section>
                <section>
                    <h3>Prolog - řešení</h3>
                    <img class="stretch" src="data/prolog-2.png">
                </section>
                <section>
                    <h3>Prolog - výsledky</h3>
                    <table>
                        <thead>
                            <th>Umístění</th>
                            <th>Název týmu</th>
                            <th>Čas</th>
                        </thead>
                        <tbody id="results-prolog">
                        </tbody>
                    </table>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 1</h2>
                    <h3>Jiřetín pod Jedlovou</h3>

                    <h4>A1 - orienťácká šifra</h4>
                    <img width="300" src="data/a-1.png">
                </section>
                <section>
                    <h3>A1 - úspěšnost</h3>
                    <canvas id="a1-chart"></canvas>
                </section>
                <section>
                    <h3>A1 - řešení</h3>
                    <img class="stretch" src="data/a-1.png">
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 2</h2>
                    <h3>Adrenalin park</h3>

                    <h4>A2 - obrázková šifra s hexy</h4>
                    <h4>B2 - káry</h4>

                    <img height="300" src="data/a-2.png">
                    <img height="300" src="data/b-2.png">
                </section>
                <section>
                    <h3>A2 - úspěšnost</h3>
                    <canvas id="a2-chart"></canvas>
                </section>
                <section>
                    <h3>A2 - řešení</h3>
                    <img class="stretch" src="data/a-2.png">
                </section>
                <section>
                    <h3>B2 - úspěšnost</h3>
                    <canvas id="b2-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 3</h2>
                    <h3>Jedlová - rozhledna</h3>

                    <h4>A3 - grafikon + ružice</h4>
                    <h4>B3 - rozhledna + fotka</h4>
                </section>
                <section>
                    <h3>A3 - úspěšnost</h3>
                    <canvas id="a3-chart"></canvas>
                </section>
                <section>
                    <h3>A3 - řešení</h3>
                </section>
                <section>
                    <h3>B3 - úspěšnost</h3>
                    <canvas id="b3-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 4</h2>
                    <h3>Malý Stožec</h3>

                    <h4>A4 - chemická</h4>
                    <h4>B4 - přenos zprávy</h4>
                </section>
                <section>
                    <h3>A4 - úspěšnost</h3>
                    <canvas id="a4-chart"></canvas>
                </section>
                <section>
                    <h3>A4 - řešení</h3>
                </section>
                <section>
                    <h3>B4 - úspěšnost</h3>
                    <canvas id="b4-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 5</h2>
                    <h3>Malý Semerink</h3>

                    <h4>A5 - jídelní</h4>
                    <h4>B5 - logik</h4>
                </section>
                <section>
                    <h3>A5 - úspěšnost</h3>
                    <canvas id="a5-chart"></canvas>
                </section>
                <section>
                    <h3>A5 - řešení</h3>
                </section>
                <section>
                    <h3>B5 - úspěšnost</h3>
                    <canvas id="b5-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 6</h2>
                    <h3>Střelecký terč</h3>

                    <h4>A6 - terče</h4>
                    <h4>B6 - biatlon</h4>
                </section>
                <section>
                    <h3>A6 - úspěšnost</h3>
                    <canvas id="a6-chart"></canvas>
                </section>
                <section>
                    <h3>A6 - řešení</h3>
                </section>
                <section>
                    <h3>B6 - úspěšnost</h3>
                    <canvas id="b6-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 7</h2>
                    <h3>Lesní divadlo</h3>

                    <h4>A7 - křížovka</h4>
                    <h4>B7 - slackline</h4>
                </section>
                <section>
                    <h3>A7 - úspěšnost</h3>
                    <canvas id="a7-chart"></canvas>
                </section>
                <section>
                    <h3>A7 - řešení</h3>
                </section>
                <section>
                    <h3>B7 - úspěšnost</h3>
                    <canvas id="b7-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 8</h2>
                    <h3>Tomiškův rybník</h3>

                    <h4>A8 - vážící</h4>
                    <h4>B8 - námořní bitva</h4>
                </section>
                <section>
                    <h3>A8 - úspěšnost</h3>
                    <canvas id="a8-chart"></canvas>
                </section>
                <section>
                    <h3>A8 - řešení</h3>
                </section>
                <section>
                    <h3>B8 - úspěšnost</h3>
                    <canvas id="b8-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 9</h2>
                    <h3>Chřibská přehrada</h3>

                    <h4>A9 - vysýpací</h4>
                    <h4>B9 - pípáky</h4>
                </section>
                <section>
                    <h3>A9 - úspěšnost</h3>
                    <canvas id="a9-chart"></canvas>
                </section>
                <section>
                    <h3>A9 - řešení</h3>
                </section>
                <section>
                    <h3>B9 - úspěšnost</h3>
                    <canvas id="b9-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 10</h2>
                    <h3>Jedlová - osada</h3>

                    <h4>A10 - digitálky</h4>
                    <h4>B10 - lasery</h4>
                </section>
                <section>
                    <h3>A10 - úspěšnost</h3>
                    <canvas id="a10-chart"></canvas>
                </section>
                <section>
                    <h3>A10 - řešení</h3>
                </section>
                <section>
                    <h3>B10 - úspěšnost</h3>
                    <canvas id="b10-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Stanoviště 11</h2>
                    <h3>Křížová Hora</h3>

                    <h4>A11 - obálka s cílovým kódem</h4>
                </section>
                <section>
                    <h3>A11 - úspěšnost</h3>
                    <canvas id="a11-chart"></canvas>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus 1</h2>

                    <h4>A101 - slepá včela</h4>
                </section>
                <section>
                    <h3>A101 - úspěšnost</h3>
                    <canvas id="bonus1-chart"></canvas>
                </section>
                <section>
                    <h3>A101 - řešení</h3>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus 2</h2>

                    <h4>A102 - praporky</h4>
                </section>
                <section>
                    <h3>A102 - úspěšnost</h3>
                    <canvas id="bonus2-chart"></canvas>
                </section>
                <section>
                    <h3>A102 - řešení</h3>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus 3</h2>

                    <h4>A103 - barvy</h4>
                </section>
                <section>
                    <h3>A103 - úspěšnost</h3>
                    <canvas id="bonus3-chart"></canvas>
                </section>
                <section>
                    <h3>A103 - řešení</h3>
                </section>
            </section>

            <section>
                <section>
                    <h2>Bonus - finální úkol</h2>

                    <h4>A104 - heslo z indicií</h4>
                </section>
                <section>
                    <h3>A104 - úspěšnost</h3>
                    <canvas id="bonus4-chart"></canvas>
                </section>
                <section>
                    <h3>A104 - řešení</h3>
                </section>
            </section>

            <section>
                <section data-state="chart-final-1">
                    <h3>Body celkem</h3>
                    <canvas class="stretch" id="chart-final-1"></canvas>
                </section>
            </section>
        </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script src="js/chart.min.js"></script>
    <script src="js/chartjs-plugin-datalabels.js"></script>
    <!-- <script src="js/chartjs-plugin-labels.js"></script> -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/csv-to-array.js"></script>
    <script src="js/rxjs.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/muhu/muhu.js"></script>
    <script src="js/moment.js"></script>

    <script>
        var teams;
        var teamsCount;
        var keyUp = 38;
        var keyDown = 40;

        Reveal.initialize({
            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } }
            ]
        });

        Reveal.addEventListener('ready', function () {
            chartJsDefaults();

            getPrologData(data => {
                var prolog = data;

                getACodes(data => {
                    var aCodes = data;

                    getBCodes(data => {
                        var bCodes = data;

                        getAnswers(data => {
                            var answers = data;

                            getHints(data => {
                                var hints = data;

                                getFinishData(data => {
                                    var finish = data;

                                    getStartData(data => {
                                        var start = data;

                                        // spoj data po tymech
                                        var all = mergeAll(prolog, start, finish, aCodes, bCodes, hints, answers);
                                        var allCount = all.length;

                                        // spocitej statistiky uspesnosti stanovist
                                        window.a1Chart = createPieChart('a1-chart', getChartData(all, 's001', 'a'));

                                        window.a2Chart = createPieChart('a2-chart', getChartData(all, 's002', 'a'));
                                        window.b2Chart = createPieChart('b2-chart', getChartData(all, 's002', 'b'));

                                        window.a3Chart = createPieChart('a3-chart', getChartData(all, 's003', 'a'));
                                        window.b3Chart = createPieChart('b3-chart', getChartData(all, 's003', 'b'));

                                        window.a4Chart = createPieChart('a4-chart', getChartData(all, 's004', 'a'));
                                        window.b4Chart = createPieChart('b4-chart', getChartData(all, 's004', 'b'));

                                        window.a5Chart = createPieChart('a5-chart', getChartData(all, 's005', 'a'));
                                        window.b5Chart = createPieChart('b5-chart', getChartData(all, 's005', 'b'));

                                        window.a6Chart = createPieChart('a6-chart', getChartData(all, 's006', 'a'));
                                        window.b6Chart = createPieChart('b6-chart', getChartData(all, 's006', 'b'));

                                        window.a7Chart = createPieChart('a7-chart', getChartData(all, 's007', 'a'));
                                        window.b7Chart = createPieChart('b7-chart', getChartData(all, 's007', 'b'));

                                        window.a8Chart = createPieChart('a8-chart', getChartData(all, 's008', 'a'));
                                        window.b8Chart = createPieChart('b8-chart', getChartData(all, 's008', 'b'));

                                        window.a9Chart = createPieChart('a9-chart', getChartData(all, 's009', 'a'));
                                        window.b9Chart = createPieChart('b9-chart', getChartData(all, 's009', 'b'));

                                        window.a10Chart = createPieChart('a10-chart', getChartData(all, 's010', 'a'));
                                        window.b10Chart = createPieChart('b10-chart', getChartData(all, 's010', 'b'));

                                        window.a11Chart = createPieChart('a11-chart', getChartData(all, 's011', 'a'));

                                        window.bonus1Chart = createPieChart('bonus1-chart', getChartData(all, 's101', 'a'));
                                        window.bonus2Chart = createPieChart('bonus2-chart', getChartData(all, 's102', 'a'));
                                        window.bonus3Chart = createPieChart('bonus3-chart', getChartData(all, 's103', 'a'));

                                        window.bonus4Chart = createPieChart('bonus4-chart', getChartData(all, 's104', 'a'));
                                    });
                                });
                            });
                        });
                    });
                });
            });

            getTeamNames(data => {
                teams = data;
                teamsCount = teams.length;
            });

            getPrologDataAsHtml(data => {
                $('#results-prolog').append(data);
            });
        });

        Reveal.addEventListener('chart-final-1', function () {
            var labels = [];
            var data = [];
            for (var i = 0; i < teamsCount; ++i) {
                labels.push("");
                data.push(0);
            }

            window.final1Chart = createFinalChart('chart-final-1', labels, data)
        });

        Reveal.addEventListener('slidechanged', function (event) {
            if (event.currentSlide.attributes["data-state"] != null &&
                event.currentSlide.attributes["data-state"].value == "chart-final-1") {
                var i = teamsCount;

                Reveal.addKeyBinding(keyDown, function () {
                    if (i > 0) {
                        --i;
                        finalChartAddData(window.final1Chart, i, teams[i] + ' | ' + (i + 1).toString().padStart(5, ' ') + '.', [100]);
                    }
                });

                Reveal.addKeyBinding(keyUp, function () {
                    if (i < teamsCount) {
                        finalChartRemoveData(window.final1Chart, i);
                        ++i;
                    }
                });
            }
            else {
                Reveal.removeKeyBinding(keyDown);
                Reveal.removeKeyBinding(keyUp);
            }
        });

        Reveal.configure({
            pdfMaxPagesPerSlide: 1
        });
    </script>

    <script type="text/javascript">
        var header = $('#header').html();
        if (window.location.search.match(/print-pdf/gi)) {
            $('.slides > section').prepend(header);
        }
        else {
            $('.slides').prepend(header);
        }
    </script>
</body>

</html>